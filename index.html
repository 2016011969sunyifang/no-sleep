<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'"
    />
    <meta
      http-equiv="X-Content-Security-Policy"
      content="default-src 'self'; script-src 'self'"
    />
  </head>
  <body>
    <img id="toggleImage" src="" />
  </body>
  <script>
    const { ipcRenderer } = require("electron");
    const path = require("path");
    const dirname = window.electron.getDirname();

    var images = [
      path.join(dirname, "./asset/no-sleep.png"), // 开启状态的图片
      path.join(dirname, "./asset/sleep.png"), // 关闭状态的图片
    ];
    var currentImageIndex = 0;

    document.getElementById("toggleImage").src = images[currentImageIndex];

    document
      .getElementById("toggleImage")
      .addEventListener("click", function () {
        currentImageIndex = 1 - currentImageIndex; // 切换图片的状态
        this.src = images[currentImageIndex]; // 更新图片的 src 属性
      });
    document
      .getElementById("toggleImage")
      .addEventListener("mousedown", function (event) {
        ipcRenderer.send("drag-start", { x: event.screenX, y: event.screenY });
      });

    document
      .getElementById("toggleImage")
      .addEventListener("mouseup", function (event) {
        ipcRenderer.send("drag-end", { x: event.screenX, y: event.screenY });
      });
  </script>
  <script src="./renderer.js"></script>
</html>
